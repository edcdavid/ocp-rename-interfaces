# Reference MachineConfig Example
# This file was generated using: ocp-rename-interfaces --macs "cc:aa:aa:aa:df:01" --names "ptp0"
#
# To generate your own MachineConfig, use the ocp-rename-interfaces tool:
#
# Single interface:
#   ./bin/ocp-rename-interfaces --macs "<MAC>" --names "<NAME>" --output config.yaml
#
# Multiple interfaces (names matched to MACs in order):
#   ./bin/ocp-rename-interfaces --macs "<MAC1>,<MAC2>,<MAC3>" --names "ptp0,ptp1,ptp2" --output config.yaml
#
# Using NamePolicy instead of explicit names:
#   ./bin/ocp-rename-interfaces --macs "<MAC>" --name-policies "slot,path,onboard" --output config.yaml
#
apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  name: 50-ptp-operator-interfaces
  labels:
    machineconfiguration.openshift.io/role: worker
spec:
  config:
    ignition:
      version: 3.2.0
    storage:
      files:
      # Rename interface with MAC cc:aa:aa:aa:df:01 to ptp0
      - path: /etc/systemd/network/10-ptp0.link
        mode: 420  # 0644 in octal
        overwrite: true
        contents:
          source: data:text/plain,%5BMatch%5D%0AMACAddress%3Dcc%3Aaa%3Aaa%3Aaa%3Adf%3A01%0A%0A%5BLink%5D%0AName%3Dptp0%0A